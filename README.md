–ë–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–π API (FastAPI + PostgreSQL)

–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

RESTful API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–º –∫–∞—Ç–∞–ª–æ–≥–æ–º —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:

üìö –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏ (CRUD)

üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∏—Ç–∞—Ç–µ–ª—è–º–∏

üîê JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä–µ–π

üìñ –õ–æ–≥–∏–∫–∞ –≤—ã–¥–∞—á–∏/–≤–æ–∑–≤—Ä–∞—Ç–∞ –∫–Ω–∏–≥ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª

–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

Python 3.10+

FastAPI (–≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫)

PostgreSQL (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)

SQLAlchemy (ORM)

Alembic (–º–∏–≥—Ä–∞—Ü–∏–∏)

JWT (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Python 3.10+

PostgreSQL 13+

Git (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

bash

git clone https://github.com/–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π/library_api.git

cd library_api

3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

ini

DATABASE_URL=postgresql+asyncpg://user:password@localhost/library_db

SECRET_KEY=–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á

ALGORITHM=HS256

ACCESS_TOKEN_EXPIRE_MINUTES=30

4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

bash

pip install -r requirements.txt

5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–π—Ç–µ –ë–î –≤ PostgreSQL:

sql

CREATE DATABASE library_db;

–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:

bash

alembic upgrade head

6. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

bash

uvicorn app.main:app --reload

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://127.0.0.1:8000

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã:

üìÑ Swagger UI: http://127.0.0.1:8000/docs

üìÑ ReDoc: http://127.0.0.1:8000/redoc

–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

POST /api/v1/auth/register - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—è

POST /api/v1/auth/login - –ü–æ–ª—É—á–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞

–ö–Ω–∏–≥–∏ (—Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)


POST /api/v1/books - –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É

GET /api/v1/books - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥

GET /api/v1/books/{id} - –ü–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥—É –ø–æ ID

PUT /api/v1/books/{id} - –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–∏–≥—É

DELETE /api/v1/books/{id} - –£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É

–ß–∏—Ç–∞—Ç–µ–ª–∏

POST /api/v1/readers - –î–æ–±–∞–≤–∏—Ç—å —á–∏—Ç–∞—Ç–µ–ª—è

GET /api/v1/readers/{id} - –ü–æ–ª—É—á–∏—Ç—å —á–∏—Ç–∞—Ç–µ–ª—è

–í—ã–¥–∞—á–∞ –∫–Ω–∏–≥
POST /api/v1/borrows - –í—ã–¥–∞—Ç—å –∫–Ω–∏–≥—É —á–∏—Ç–∞—Ç–µ–ª—é

PUT /api/v1/borrows/{id}/return - –í–µ—Ä–Ω—É—Ç—å –∫–Ω–∏–≥—É

–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞

‚ùó –ö–Ω–∏–≥—É –º–æ–∂–Ω–æ –≤—ã–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã

‚ùó –ß–∏—Ç–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –±–æ–ª–µ–µ 3 –∫–Ω–∏–≥ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

‚ùó –ù–µ–ª—å–∑—è –≤–µ—Ä–Ω—É—Ç—å —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—É—é –∫–Ω–∏–≥—É

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

bash

pytest

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É

–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

bash

alembic revision --autogenerate -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

alembic upgrade head

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

library_api/

‚îú‚îÄ‚îÄ app/               # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥

‚îÇ   ‚îú‚îÄ‚îÄ api/           # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

‚îÇ   ‚îú‚îÄ‚îÄ core/          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏

‚îÇ   ‚îú‚îÄ‚îÄ db/            # –ú–æ–¥–µ–ª–∏ –ë–î

‚îÇ   ‚îú‚îÄ‚îÄ schemas/       # Pydantic —Å—Ö–µ–º—ã

‚îÇ   ‚îî‚îÄ‚îÄ services/      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

‚îú‚îÄ‚îÄ tests/             # –¢–µ—Å—Ç—ã

‚îî‚îÄ‚îÄ migrations/        # –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
